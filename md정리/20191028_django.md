# django 

- static web, dynamic web 모두 가능
- 프랜차이즈 까페느낌 : 재료와 레시피는 우리가 제공할테니 너는 좋은 까페 만드는데 집중해
  - Framework : Express JS, Ruby on Rails, Python django, ..
- 장고 활용 앱 :  유튜브, 인스타그램 등등..





## Web Service

> MTV 패턴사용 = MVC



#### MTV

- MTV 

  - Model : Data를 정의, 데이터를 관리(DB에 저장되는 데이터)

  - Template(=view) : 사용자가 보는 화면을 정의

  - View(=controller) : 중간 관리자(Controller역할)

    - 사용자가 볼 Data를 가공하는 로직

    - 실질적으로 프로그램 로직이 동작하여 데이터를 가져오고 적절하게 가공하여 그 결과를 Template에 전달하는 역할 수행



#### 3 kings of django => .py

- models.py : 데이터베이스 관리
- views.py : pages 관리(1 view <=> 1 url)
- urls.py : 클라이언트로부터 요청들어오면 해당 url로 mapping



####  처리과정

1. 클라이언트의 요청이 들어오면 url conf 모듈을 이용하여 url을 분석

2. 해당 url에 대한 처리를 담당하는 view를 결정

3. view는 로직을 실행하면서 데이터베이스 처리가 필요한 것은 모델을 통해 처리하고 결과를 Template을 활용해 클라이언트에 전송한 html 파일 생성

4. view는 최종결과로 html 파일을 클라이언트로 보낸다

   

   ![django mtv에 대한 이미지 검색결과](https://t1.daumcdn.net/cfile/tistory/991AD1365B448DA702) 

- 요청이 들어오면 URLS에서 적절한 함수를 찾아서(Views.py에서) Template에 씌워서 사용자에게 보여줌





## django 환경설정

#### django 가상환경 생성

- django의 패키지를 설치할 가상환경을 따로 생성

![1572226203422]( https://user-images.githubusercontent.com/31427258/67648033-d024ae00-f977-11e9-85fd-25b6bb6ee46a.png )

- 가상환경선택 : /05_Django 폴더열고 `ctrl+shift+p` 로 탐색기에서 interpreter치고 설치한 가상환경 선택

  - venv 선택

  ![1572226578303]( https://user-images.githubusercontent.com/31427258/67648035-d024ae00-f977-11e9-9fa7-0ee6b5a760bc.png )

- 앞으로는 terminal에서 bash 선택할때마다 자동으로 가상환경 실행됨

  ![1572226766118]( https://user-images.githubusercontent.com/31427258/67648029-cf8c1780-f977-11e9-80d4-424b3a553a4c.png )





#### .gitignore 파일 생성

- 05_DJANGO 폴더에 .gitignore 파일 생성
- gitignore.io 에서 .gitignore 코드 만들고 내 gitignore 파일에 넣어주기

![1572226215470]( https://user-images.githubusercontent.com/31427258/67648034-d024ae00-f977-11e9-8822-639f41ea1e93.png )



#### settings.json 

- pythonPath 밑에 코드 넣어주기

  ```json
  {
    "python.pythonPath": "venv\\Scripts\\python.exe",
    "files.associations": {
      "**/*.html": "html",
      "**/templates/**/*.html": "django-html",
      "**/templates/**/*": "django-txt",
      "**/requirements{/**,*}.{txt,in}": "pip-requirements"
    },
    "emmet.includeLanguages": {
      "django-html": "html"
    },
    "[django-html]": {
      "editor.tabSize": 2
    },
  }
  ```

  





## django 설치

- 현재 설치된 package list 보기

  ```bash
  $ pip list
  ```

  

- pip upgrade

  ```bash
  $ python -m pip install --upgrade pip
  ```



- django 설치

  ```bash
  $ pip install django
  ```

  

## django 프로젝트 

#### django 프로젝트 생성

- 05_DJANGO/00_django_intro 폴더 생성



#### django 프로젝트 시작

- 프로젝트 폴더 00_django_intro로 가주기

  ```bash
  $ cd 00_django_intro
  ```



- 프로젝트 시작

  ```bash
  $ django-admin startproject config .
  ```



- 서버 실행

  ```bash
  $ python manage.py runserver
  ```





## django 프로젝트 구조

![1572228863345]( https://user-images.githubusercontent.com/31427258/67648030-cf8c1780-f977-11e9-8ffe-cda47eb13067.png )

- config/ : django 프로젝트의 각종 설정들이 담기는 폴더
  - `__init__.py` : 빈파일. 이 디렉토리를 python이 python package로 관리해줌, 건들일이 없음
  - settings.py : 각종 환경설정 존재 (db, static web 등의 설정)
  - urls.py : 사용자가 들어오는 경로와 view함수를 mapping
  - wsgi.py : webserver framework 규칙. 배포할 때 확인
- db.sqlite3 : 기본적으로 사용할 db정보
- manage.py : django 프로젝트와 소통할때 쓰는 command line 유틸리티





## Application 

> 어떤 행위를 하는 기능
>
> 한 프로젝트에 여러개의 application이 존재가능하다



#### application 생성

- pages라는 application 생성

  ```bash
  $ python manage.py startapp pages
  ```

![1572229422252]( https://user-images.githubusercontent.com/31427258/67648032-cf8c1780-f977-11e9-8871-fc88922c1b3a.png )



- pages 구조

  - migrations : DB Create, Update, Delete기록들이 담기는 곳

  - `__init__.py` : 빈파일. 이 디렉토리를 python이 python package로 관리해줌, 건들일이 없음

  - admin.py : 관리자 페이지를 customizing할 수 있는 곳
  - apps.py  : 해당 application의 구성정보를 가지고 있는 곳
  - models.py :  DB의 형식을 지정하는 곳
  - test.py : test code를 작성하는 곳
  - views.py : view 함수들이 들어가 있는 곳



- application 추가

  ```python
  # settings.py
  
  ...
  INSTALLED_APPS = [
      # Local apps (개발자가 만든 application)
      'pages',
  
      # Third Party apps (library)
  
      # Django apps
      'django.contrib.admin',
      'django.contrib.auth',
      'django.contrib.contenttypes',
      'django.contrib.sessions',
      'django.contrib.messages',
      'django.contrib.staticfiles',
  ]
  ...
  
  
  ...
  # Language & time_zone 변경
  LANGUAGE_CODE = 'ko-kr'
  
  TIME_ZONE = 'Asia/Seoul'
  ...
  ```

  